<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">

  <title>The SimpleMenu Widget</title>
  <meta name="Author" content=
  "Roland Krause 2002, roland_krause@freenet.de">
  <meta name="Description" content="Documentation to XawPlus">
</head>

<body text="#000000" bgcolor="#FFFFFF" link="#0000EF" vlink=
"#55188A" alink="#FF0000">
  <h3><i><font color=
  "#FF0000">_________________________________________________________Xaw</font><font color="#008000">Plus</font></i></h3>

  <h3><i>The SimpleMenu Widget</i></h3>

  <table summary="">
    <tr>
      <td>Application Header file<br>
      Class Header file<br>
      Class<br>
      Class Name<br>
      Superclass</td>

      <td>&lt;X11/XawPlus/SimpleMenu.h&gt;<br>
      &lt;X11/XawPlus/SimpleMenP.h&gt;<br>
      simpleMenuWidgetClass<br>
      SimpleMenu<br>
      OverrideShell</td>
    </tr>
  </table>

  <p>The SimpleMenu widget is a container for the menu entries. It
  is a direct subclass of shell, and is usually created with
  <i>XtCreatePopupShell()</i>. This is the only part of the menu
  that actually contains a window. The SimpleMenu serves as the
  glue to bind the individual menu entries together into a
  menu.</p>

  <h3>Differences between Xaw and XawPlus</h3>

  <p>In XawPlus the menus entries (the Sme objects) are drawn in a
  3D styled menu window, supplied by this widget. For this feature
  SimpleMenu has some new resources described below.</p>

  <h3>Resources</h3>

  <p>When creating a Simple widget instance, the following
  resources are retrieved from the argument list of
  <i>XtSetValues()</i> or <i>XtVaSetValues()</i> or from the
  resource database:</p>

  <table border="1" cellspacing="0" cellpadding="0" width="90%"
  summary="">
    <tr>
      <td bgcolor="#E0E0E0"><b>Name</b></td>

      <td bgcolor="#E0E0E0"><b>Class</b></td>

      <td bgcolor="#E0E0E0"><b>Type</b></td>

      <td bgcolor="#E0E0E0"><b>Default Value</b></td>
    </tr>

    <tr>
      <td bgcolor="#C0C0C0">OBJECT:</td>

      <td bgcolor="#C0C0C0"></td>

      <td bgcolor="#C0C0C0"></td>

      <td bgcolor="#C0C0C0"></td>
    </tr>

    <tr>
      <td>destroyCallback</td>

      <td>Callback</td>

      <td>Pointer</td>

      <td>NULL</td>
    </tr>

    <tr>
      <td bgcolor="#C0C0C0">RECTANGLE:</td>

      <td bgcolor="#C0C0C0"></td>

      <td bgcolor="#C0C0C0"></td>

      <td bgcolor="#C0C0C0"></td>
    </tr>

    <tr>
      <td>borderWidth<br>
      height<br>
      sensitive<br>
      width<br>
      x<br>
      y</td>

      <td>BorderWidth<br>
      Height<br>
      Sensitive<br>
      Width<br>
      Position<br>
      Position</td>

      <td>Dimension<br>
      Dimension<br>
      Boolean<br>
      Dimension<br>
      Position<br>
      Position</td>

      <td>0<br>
      12<br>
      True<br>
      12<br>
      0<br>
      0</td>
    </tr>

    <tr>
      <td bgcolor="#C0C0C0">CORE:</td>

      <td bgcolor="#C0C0C0"></td>

      <td bgcolor="#C0C0C0"></td>

      <td bgcolor="#C0C0C0"></td>
    </tr>

    <tr>
      <td>border<br>
      background<br>
      mappedWhenManaged</td>

      <td>BorderColor<br>
      Background<br>
      MappedWhenManaged</td>

      <td>Pixel<br>
      Pixel<br>
      Boolean</td>

      <td>XtDefaultForeground<br>
      grey75<br>
      True</td>
    </tr>

    <tr>
      <td bgcolor="#C0C0C0">SHELL:</td>

      <td bgcolor="#C0C0C0"></td>

      <td bgcolor="#C0C0C0"></td>

      <td bgcolor="#C0C0C0"></td>
    </tr>

    <tr>
      <td>allowShellResize<br>
      geometry<br>
      overrideRedirect<br>
      popdownCallback<br>
      popupCallback<br>
      saveUnder</td>

      <td>AllowShellResize<br>
      Geometry<br>
      OverrideRedirect<br>
      Callback<br>
      Callback<br>
      SaveUnder</td>

      <td>Boolean<br>
      String<br>
      Boolean<br>
      Callback<br>
      Callback<br>
      Boolean</td>

      <td>True<br>
      NULL<br>
      see above<br>
      see above<br>
      see above<br>
      True</td>
    </tr>

    <tr>
      <td bgcolor="#C0C0C0">SIMPLEMENU:</td>

      <td bgcolor="#C0C0C0"></td>

      <td bgcolor="#C0C0C0"></td>

      <td bgcolor="#C0C0C0"></td>
    </tr>

    <tr>
      <td>backingStore<br>
      menuOnScreen<br>
      popupOnEntry<br>
      cursor<br>
      label<br>
      labelClass<br>
      rowHeight<br>
      bottomMargin<br>
      topMargin<br>
      highlightColor<br>
      shadowColor<br>
      buttonBorderWidth</td>

      <td>BackingStore<br>
      MenuOnScreen<br>
      PopupOnEntry<br>
      Cursor<br>
      Label<br>
      LabelClass<br>
      RowHeight<br>
      VerticalMargins<br>
      VerticalMargins<br>
      Background<br>
      Background<br>
      Width</td>

      <td>BackingStore<br>
      Boolean<br>
      Widget<br>
      Cursor<br>
      String<br>
      Pointer<br>
      Dimension<br>
      Dimension<br>
      Dimension<br>
      Pixel<br>
      Pixel<br>
      Dimension</td>

      <td>default<br>
      True<br>
      NULL<br>
      None<br>
      NULL (No label)<br>
      smeBSBObjectClass<br>
      Height of Font<br>
      VerticalSpace<br>
      VerticalSpace<br>
      grey90<br>
      grey40<br>
      2</td>
    </tr>
  </table>

  <table cellspacing="4" cellpadding="0" width="90%" summary="">
    <tr>
      <td align="left" valign="top"><b>backingStore</b></td>

      <td>Determines what type of backing store will be used for
      the menu. Legal values for this resource are
      <i>NotUseful</i>, <i>WhenMapped</i>, and <i>Always</i>. These
      values are the backing store integers defined in
      &lt;X11/X.h&gt;. If <i>default</i> is specified (the default
      behavior) the server will use whatever it thinks is
      appropriate.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>bottomMargin,<br>
      topMargin</b></td>

      <td>The amount of space between the top or bottom of the menu
      and the menu entry closest to that edge.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>cursor</b></td>

      <td>The shape of the mouse pointer whenever it is in this
      widget.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>geometry</b></td>

      <td>If this resource is specified it will override the x, y,
      width and height of this widget. The format of this string is
      [&lt;width&gt;x&lt;height&gt;][{+ -} &lt;xoffset&gt; {+
      -}&lt;yoffset&gt;].</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>label</b></td>

      <td>This label will be placed at the top of the SimpleMenu,
      and may not be highlighted. The name of the label object is
      <i>menuLabel</i>. Using this name it is possible to modify
      the label's attributes through the resource database. When
      the label is created, the <i>label</i> is hard coded to the
      value of <i>label</i>, and <i>justify</i> is hard coded as
      <i>XtJustifyCenter</i>.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>labelClass</b></td>

      <td>Specifies the type of Sme object created as the menu
      label.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>menuOnScreen</b></td>

      <td>If the menu is automatically positioned under the cursor
      with the <i>XawPositionSimpleMenu</i> action, and this
      resource is <i>True</i>, then the menu will always be fully
      visible on the screen.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>overrideRedirect</b></td>

      <td>Determines the value of the <i>override_redirect</i>
      attribute of the SimpleMenu's window. The
      <i>override_redirect</i> attribute of a window determines
      whether or not a window manager may interpose itself between
      this window and the root window of the display. For more
      information see the <i>Interclient Communications Conventions
      Manual</i>.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>popdownCallback,<br>
      popupCallback</b></td>

      <td>These callback functions are called by the Xt Intrinsics
      whenever the shell is popped up or down (See Xt for
      details).</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>popupOnEntry</b></td>

      <td>The <i>XawPositionSimpleMenu</i> action will, by default,
      popup the SimpleMenu with its label (or first entry) directly
      under the pointer. To popup the menu under another entry, set
      this resource to the menu entry that should be under the
      pointer, when the menu is popped up. This allows the
      application to offer the user a default menu entry that can
      be selected with out moving the pointer.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>rowHeight</b></td>

      <td>If this resources is zero (the default) then each menu
      entry will be given its desired height. If this resource has
      any other value then all menu entries will be forced to be
      <i>rowHeight</i> pixels high.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>saveUnder</b></td>

      <td>If this is <b>True</b> then save unders will be active on
      the menu's window.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>highlightColor</b></td>

      <td>This color is used for the highlighted part of the menu
      border.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>shadowColor</b></td>

      <td>This color is used for the shadowed part of the menu
      border.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>buttonBorderWidth</b></td>

      <td>The border width of the menu. The reason for the name is
      compatibility with the resource of the <i>Simple</i>
      widget.</td>
    </tr>
  </table>

  <h3>SimpleMenu Actions</h3>

  <p>The SimpleMenu widget supports the following actions:</p>

  <ul>
    <li>Switching the entry under the mouse pointer between the
    foreground and background colors with <i>highlight</i> and
    <i>unhighlight</i></li>

    <li>Processing menu entry callbacks with <i>notify</i></li>
  </ul>

  <p>The following are the default translation bindings used by the
  SimpleMenu widget:</p>

  <blockquote>
    <table cellspacing="4" cellpadding="0" width="90%" summary="">
      <tr>
        <td><i>&lt;EnterWindow&gt;:<br>
        &lt;LeaveWindow&gt;:<br>
        &lt;BtnMotion&gt;:<br>
        &lt;BtnUp&gt;:</i></td>

        <td><i>highlight()<br>
        unhighlight()<br>
        highlight()<br>
        MenuPopdown() notify() unhighlight()</i></td>
      </tr>
    </table>
  </blockquote>

  <p>The user can pop down the menu without activating any of the
  callback functions by releasing the pointer button when no menu
  item is highlighted.</p>

  <p>The full list of actions supported by SimpleMenu is:</p>

  <table cellspacing="4" cellpadding="0" width="90%" summary="">
    <tr>
      <td align="left" valign="top"><b>highlight</b>()</td>

      <td>Highlight the menu entry that is currently under the
      pointer. Only a item that is highlighted will be notified
      when the <i>notify()</i> action is invoked. The look of a
      highlighted entry is determined by the menu entry.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>unhighlight</b>()</td>

      <td>Unhighlights the currently highlighted menu item, and
      returns it to its normal look.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>notify</b>()</td>

      <td>Notifies the menu entry that is currently highlighted
      that is has been selected. It is the responsibility of the
      menu entry to take the appropriate action.</td>
    </tr>

    <tr>
      <td align="left" valign="top"><b>MenuPopdown</b>(menu)</td>

      <td>This action is defined in Xt.</td>
    </tr>
  </table>

  <h3>Positioning the SimpleMenu</h3>

  <p>If the SimpleMenu widget is to be used as a pulldown menu then
  the MenuButton widget, or some other outside means should be used
  to place the menu when it is popped up.</p>

  <p>If popup menus are desired it will be necessary to add the
  <i>XawPositionSimpleMenu()</i> and <i>MenuPopup()</i> actions to
  the translation table of the widget that will be popping up the
  menu. The <i>MenuPopup()</i> action is described in Xt.
  <i>XawPositionSimpleMenu()</i> is a global action procedure
  registered by the SimpleMenu widget when the first one is created
  or the convenience routine <i>XawSimpleMenuAddGlobalActions()</i>
  is called.</p>

  <p>Translation writers should be aware that Xt does not register
  grabs on <i>don't care</i> modifiers, and therefore the left hand
  side of the production should be written to exclude unspecified
  modifiers. For example these are the translations needed to popup
  some of <b>xterm's</b> menus:</p>

  <blockquote>
    <table cellspacing="4" cellpadding="0" width="90%" summary="">
      <tr>
        <td><i>!Ctrl&lt;Btn1Down&gt;:<br>
        !Ctrl&lt;Btn2Down&gt;:</i></td>

        <td><i>XawPositionSimpleMenu(xterm) MenuPopup(xterm)<br>
        XawPositionSimpleMenu(modes) MenuPopup(modes)</i></td>
      </tr>
    </table>
  </blockquote>

  <table cellspacing="4" cellpadding="0" width="90%" summary="">
    <tr>
      <td align="left" valign="top">
      <b>XawPositionSimpleMenu</b>(menu)</td>

      <td>The <i>XawPositionSimpleMenu()</i> routine will search
      for the menu name passed to it using <i>XtNameToWidget()</i>
      starting with the widget invoking the action as the reference
      widget. If it is unsuccessful it will continue up the widget
      tree using each of the invoking widget's ancestors as the
      reference widget. If it is still unsuccessful it will print a
      warning message and give up. <i>XawPositionSimpleMenu</i>
      will position the menu directly under the pointer cursor. The
      menu will be placed so that the pointer cursor is centered on
      the entry named by the <i>popupOnEntry</i> resource. If the
      <i>menuOnScreen</i> resource is <b>True</b> then the menu
      will always be fully visible on the screen.</td>
    </tr>
  </table>

  <h3>Convenience Routines</h3>

  <h4>Registering the Global Action Routines</h4>

  <p>The XawPositionSimpleMenu() action routine may often be
  invoked before any menus have been created. This can occur when
  an application uses dynamic menu creation. In these cases an
  application will need to register this global action routine by
  calling XawSimpleMenuAddGlobalActions():</p>

  <blockquote>
    <p><i>void XawSimpleMenuAddGlobalActions(app_con)<br>
    XtAppContext app_con;</i></p>

    <table cellspacing="4" cellpadding="0" width="80%" summary="">
      <tr>
        <td align="left" valign="top"><b>app_con</b></td>

        <td>Specifies the application context in which this action
        should be registered.</td>
      </tr>
    </table>
  </blockquote>

  <p>This function need only be called once per application and
  must be called before any widget that uses
  XawPositionSimpleMenu() action is realized.</p>

  <h4>Getting and Clearing the Current Menu Entry</h4>

  <p>To get the currently highlighted menu entry use
  XawSimpleMenuGetActiveEntry():</p>

  <blockquote>
    <p><i>Widget XawSimpleMenuGetActiveEntry(w)<br>
    Widget w;</i></p>

    <table cellspacing="4" cellpadding="0" width="80%" summary="">
      <tr>
        <td align="left" valign="top"><b>w</b></td>

        <td>Specifies the SimpleMenu widget.</td>
      </tr>
    </table>
  </blockquote>

  <p>This function returns the menu entry that is currently
  highlighted, or NULL if no entry is highlighted.</p>

  <p>To clear the SimpleMenu widget's internal information about
  the currently highlighted menu entry use
  XawSimpleMenuClearActiveEntry():</p>

  <blockquote>
    <p><i>Widget XawSimpleMenuClearActiveEntry(w)<br>
    Widget w;</i></p>

    <table cellspacing="4" cellpadding="0" width="80%" summary="">
      <tr>
        <td align="left" valign="top"><b>w</b></td>

        <td>Specifies the SimpleMenu widget.</td>
      </tr>
    </table>
  </blockquote>

  <p>This function unsets all internal references to the currently
  highlighted menu entry. It does not <i>unhighlight</i> or
  otherwise alter the appearance of the active entry. This function
  is primarily for use by implementors of menu entries.</p>

  <h3><i><font color="#FF0000">Xaw</font><font color=
  "#008000">Plus_________________________________________________________</font></i></h3>
</body>
</html>
