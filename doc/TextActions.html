<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
   <TITLE>Text Widget Actions</TITLE>
   <META NAME="Author" CONTENT="Roland Krause 2002, roland_krause@freenet.de">
   <META NAME="Description" CONTENT="Documentation to XawPlus">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EF" VLINK="#55188A" ALINK="#FF0000">

<H3><I><FONT COLOR="#FF0000">_________________________________________________________Xaw</FONT><FONT COLOR="#008000">Plus</FONT></I></H3>

<H3><I>Text Widget Actions</I></H3>

<P>All editing functions are performed by translation manager actions that may
be specified through the <I>translations</I> resource in the Text widget.</P>

<H3>Differences between Xaw and XawPlus</H3>

<P>None.</P>

<H3>Cursor Movement Actions</H3>

<TABLE CELLSPACING=4 CELLPADDING=0 WIDTH="95%" >
<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>forward-character</B>()<BR>
<B>backward-character</B>()</TD>
<TD>These actions move the insert point forward or backward one character in
the buffer.  If the insert point is at the end or beginning of a line
this action will move the insert point to the next (or previous) line.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>backward-character</B>()</TD>
<TD>These actions move the insert point forward or backward one character in
the buffer.  If the insert point is at the end or beginning of a line
this action will move the insert point to the next (or previous) line.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>forward-word</B>()<BR>
<B> backward-word</B>()</TD>
<TD>These actions move the insert point to the next or previous word boundary.
A word boundary is defined as a Space, Tab or Carriage Return.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>forward-paragraph</B>()<BR>
<B>backward-paragraph</B>()</TD>
<TD>These actions move the insert point to the next or previous paragraph boundary.
A paragraph boundary is defined as two Carriage Returns in a row with only
Spaces or Tabs between them.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>beginning-of-line</B>()<BR>
<B>end-of-line</B>()</TD>
<TD>These actions move to the beginning or end of the current line.  If the
insert point is already at the end or beginning of the line then no action is taken.
</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>next-line</B>()<BR>
<B>previous-line</B>()</TD>
<TD>These actions move the insert point up or down one line.  If the insert
point is currently N characters from the beginning of the line then it
will be N characters from the beginning of the next or previous line.
If N is past the end of the line, the insert point is placed at the end
of the line.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>next-page</B>()<BR>
<B>previous-page</B>()</TD>
<TD>These actions move the insert point up or down one page in the file.
One page is defined as the current height of the text widget.  The
insert point is always placed at the first character of the top line by
this action.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>beginning-of-file</B>()<BR>
<B>end-of-file</B>()</TD>
<TD>These actions place the insert point at the beginning or end of the
current text buffer.  The text widget is then scrolled the minimum
amount necessary to make the new insert point location visible.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>scroll-one-line-up</B>()<BR>
<B>scroll-one-line-down</B>()</TD>
<TD>These actions scroll the current text field up or down by one line.
They do not move the insert point.  Other than the scrollbars this is
the only way that the insert point may be moved off of the visible text
area.  The widget will be scrolled so that the insert point is back on
the screen as soon as some other action is executed.</TD>
</TR>
</TABLE>

<H3>Delete Actions</H3>

<TABLE CELLSPACING=4 CELLPADDING=0 WIDTH="95%">
<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>delete-next-character</B>()<BR>
<B>delete-previous-character</B>()</TD>
<TD>These actions remove the character immediately before or after the 
insert point.  If a Carriage Return is removed then the next line is
appended to the end of the current line.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>delete-next-word</B>()<BR>
<B>delete-previous-word</B>()</TD>
<TD>These actions remove all characters between the insert point location and
the next word boundary. A word boundary is defined as a Space, Tab or
Carriage Return.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>delete-selection</B>()</TD>
<TD>This action removes all characters in the current selection.
The selection can be set with the selection actions.</TD>
</TR>
</TABLE>

<H3>Selection Actions</H3>

<TABLE CELLSPACING=4 CELLPADDING=0 WIDTH="95%" >
<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>select-word</B>()</TD>
<TD>This action selects the word in which the insert point is currently located.
If the insert point is between words then it will select the previous word.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>select-all</B>()</TD>
<TD>This action selects the entire text buffer.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>select-start</B>()</TD>
<TD>This action sets the insert point to the current pointer location. It
will then begin a selection at this location. If many of these
selection actions occur quickly in succession then the selection count
mechanism will be invoked (see the section titled <I>Text Selections for
Application Programmers</I> for details).</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>select-adjust</B>()</TD>
<TD>This action allows a selection started with the <I>select-start</I>
action to be modified, as described above.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>select-end</B> (name[,name, ...])</TD>
<TD>This action ends a text selection that began with the <I>select-start</I>
action, and asserts ownership of the selection or selections specified.
A <I>name</I> can be a selection (e.g. <I>PRIMARY</I>) or a cut buffer
(e.g <I>CUT_BUFFER0</I>). Note that case is important. If no
<I>names</I> are specified, <I>PRIMARY</I> is asserted.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>extend-start</B>()</TD>
<TD>This action finds the nearest end of the current selection, and moves it
to the current pointer location.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>extend-adjust</B>()</TD>
<TD>This action allows a selection started with an <I>extend-start</I> action
to be modified.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>extend-end</B> (name[,name, ...])</TD>
<TD>This action ends a text selection that began with the <I>extend-start</I>
action, and asserts ownership of the selection or selections specified.
A <I>name</I> can be a selection (e.g. <I>PRIMARY</I>) or a cut buffer
(e.g <I>CUT_BUFFER0</I>). Note that case is important. If no names are
given, <I>PRIMARY</I> is asserted.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>insert-selection</B> (name[,name ,...])</TD>
<TD>This action retrieves the value of the first (left-most) named selection
that exists or the cut buffer that is not empty and inserts it into the
Text widget at the current insert point location. A <I>name</I> can be a
selection (e.g. <I>PRIMARY</I>) or a cut buffer (e.g <I>CUT_BUFFER0</I>).
Note that case is important.</TD>
</TR>
</TABLE>

<H3>New Line Actions</H3>

<TABLE CELLSPACING=4 CELLPADDING=0 WIDTH="95%" >
<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>newline-and-indent</B>()</TD>
<TD>This action inserts a newline into the text and adds spaces to
that line to indent it to match the previous line.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>newline-and-backup</B>()</TD>
<TD>This action inserts a newline into the text <I>after</I> the insert point.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>newline</B>()</TD>
<TD>This action inserts a newline into the text <I>before</I> the insert point.</TD>
</TR>
</TABLE>

<H3>Kill Actions</H3>

<TABLE CELLSPACING=4 CELLPADDING=0 WIDTH="95%" >
<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>kill-word</B>()<BR>
<B>backward-kill-word</B>()</TD>
<TD>These actions act exactly like the <I>delete-next-word</I> and
<I>delete-previous-word</I> actions, but they stuff the word that was
killed into the kill buffer (<I>CUT_BUFFER_1</I>).</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>kill-selection</B>()</TD>
<TD>This action deletes the current selection and stuffs the deleted text into
the kill buffer (<I>CUT_BUFFER_1</I>).</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>kill-to-end-of-line</B>()</TD>
<TD>This action deletes the entire line to the right of the insert point position,
and stuffs the deleted text into the kill buffer (<I>CUT_BUFFER_1</I>).
</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>kill-paragraph</B>()</TD>
<TD>This action deletes the current paragraph, if between paragraphs it deletes
the paragraph above the insert point, and stuffs the deleted text into
the kill buffer (<I>CUT_BUFFER_1</I>).
</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>kill-to-end-of-paragraph</B>()</TD>
<TD>This action deletes everything between the current insert point location and
the next paragraph boundary, and stuffs the deleted text into the kill
buffer (<I>CUT_BUFFER_1</I>).</TD>
</TR>
</TABLE>

<H3>Miscellaneous Actions</H3>

<TABLE CELLSPACING=4 CELLPADDING=0 WIDTH="95%" >
<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>redraw-display</B>()</TD>
<TD>This action recomputes the location of all the text lines on the
display, scrolls the text to vertically center the line containing the insert point
on the screen, clears the entire screen, and redisplays it.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>insert-file</B>([filename])</TD>
<TD>This action activates the insert file popup. The <I>filename</I>
option specifies the default filename to put in the filename buffer of
the popup.  If no <I>filename</I> is specified the buffer is empty
at startup.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>insert-char</B>()</TD>
<TD>This action may only be attached to a key event. It
calls XLookupString to translate the event into a (rebindable) Latin-1
character (sequence) and inserts that sequence into the text at the 
insert point position.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>insert-string</B> (string[,string ,...])</TD>
<TD>This action inserts each <I>string</I> into the text at the insert point
location. Any <I>string</I> beginning with the characters "0x" and
containing only valid hexadecimal digits in the remainder is interpreted
as a hexadecimal constant and the corresponding single character is
inserted instead.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>display-caret</B> (state,when)</TD>
<TD>This action allows the insert point to be turned on and off.
The <I>state</I> argument specifies the desired state of the insert point.
This value may be any of the string
values accepted for Boolean resources (e.g. <I>on, True,
off, False</I>, etc.). If no arguments are specified, the
default value is <I>True</I>. 
The <I>when</I> argument specifies, for <I>EnterNotify</I> or <I>LeaveNotify</I>
events whether or not the focus field in the event is to be examined.
If the second argument is not specified, or specified as something other
than <I>always</I> then if the action is bound to an <I>EnterNotify</I>
or <I>LeaveNotify</I> event, the action will be taken only if the focus
field is <I>True</I>. An augmented binding that might be useful is:<BR>
<I>*Text.Translations: #override \\<BR>
<FocusIn>: display-caret(on) \\n\\<BR>
<FocusOut>: display-caret(off)</I></TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>focus-in</B>()<BR>
<B>focus-out</B>()</TD>
<TD>These actions do not currently do anything.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>search</B>(direction, [string])</TD>
<TD>This action activates the search popup. The <I>direction</I> must be
specified as either <I>forward</I> or <I>backward</I>. The string is
optional and is used as an initial value for the <I>Search for</I>: string.
For further explanation of the search widget see the section on
<I>Text Searches</I>.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>multiply</B>(value)</TD>
<TD>The multiply action allows the user to multiply the effects of many of
the text actions. Thus the following action sequence
<I>multiply(10) delete-next-word()</I> will delete 10 words. It does not
matter whether these actions take place in one event or many events.
Using the default translations the key sequence <I>Control-u,
Control-d</I> will delete 4 characters.  
Multiply actions can be chained, thus <I>multiply(5)
multiply(5)</I> is the same as <I>multiply(25)</I>. If the string
<I>reset</I> is passed to the multiply action the effects of all previous
multiplies are removed and a beep is sent to the display.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>form-paragraph</B>()</TD>
<TD>This action removes all the Carriage Returns from the current
paragraph and reinserts them so that each line is as long as possible, while
still fitting on the current screen.  Lines are broken at word boundaries if 
at all possible. This action currently works only on Text widgets
that use ASCII text.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>transpose-characters</B>()</TD>
<TD>This action will swap the position of the character to the left of the
insert point with the character to the right of the insert point.
The insert point will then be advanced one character.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>no-op</B>([action])</TD>
<TD>The no-op action makes no change to the text widget, and is mainly used
to override translations. This action takes one optional argument. If
this argument is <I>RingBell</I> then a beep is sent to the display.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>XawWMProtocols</B> ([wm_protocol_name])</TD>
<TD>This action is written specifically for the transient shells instantiated by
the Text widget, which are the file insertion and the search and replace
dialog boxes.  This action is attached to those shells by the Text widget,
in order to handle ClientMessage events with the WM_PROTOCOLS atom in the
detail field.  This action supports WM_DELETE_WINDOW on the Text widget
popups, and may support other window manager protocols if necessary in 
the future.  The popup will be dismissed if the window manager sends
a WM_DELETE_WINDOW request and there are no parameters in the action
call, which is the default.  The popup will also be dismissed if the
parameters include the string "wm_delete_window", and the event is a
ClientMessage event requesting dismissal or is not a ClientMessage event.
This action is not sensitive to the case of the strings passed as parameters.</TD>
</TR>
</TABLE>

<H3><A NAME="ProgSelection">Text Selections for Application Programmers</A></H3>

<P>The default behavior of the text selection array is described in the
section called <I>Text Selections for Users</I>. To modify the selections
a programmer must construct a <I>XawTextSelectType</I> array (called the
selection array), containing the selections desired, and pass this as
the new value for the <I>selectionTypes</I> resource. The selection
array may also be modified using the <I>XawTextSetSelectionArray</I>
function. All selection arrays must end with the value
<I>XawselectNull</I>. The <I>selectionTypes</I> resource has no converter
registered and cannot be modified through the resource manager.</P>

<P>The array contains a list of entries that will be called when the user
attempts to select text in rapid succession with the <I>select-start</I>
action (usually by clicking a pointer button). The first entry in the
selection array will be used when the <I>select-start</I> action is
initially called. The next entry will be used when <I>select-start</I>
is called again, and so on. If a timeout value (1/10 of a second) is
exceeded, the the next <I>select-start</I> action will begin at the top
of the selection array. When <I>XawselectNull</I> is reached the array
is recycled beginning with the first element.</P>


<TABLE CELLSPACING=4 CELLPADDING=0 WIDTH="95%" >
<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>XawselectAll</B></TD>
<TD>Selects the contents of the entire buffer.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>XawselectChar</B></TD>
<TD>Selects text characters as the pointer moves over them.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>XawselectLine</B></TD>
<TD>Selects the entire line.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>XawselectNull</B></TD>
<TD>Indicates the end of the selection array.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>XawselectParagraph</B></TD>
<TD>Selects the entire paragraph.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>XawselectPosition</B></TD>
<TD>Selects the current pointer position.</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP><B>XawselectWord</B></TD>
<TD>Selects whole words as the pointer moves onto them.</TD>
</TR>
</TABLE>

<P>The default selectType array is:
<I>{XawselectPosition, XawselectWord, XawselectLine, XawselectParagraph, XawselectAll,
XawselectNull}</I></P>

<P>The selection array is not copied by the text widgets. The
application must allocate space for the array and cannot deallocate or
change it until the text widget is destroyed or until a new selection
array is set.</P>


<H3>Default Translation Bindings</H3>

<P>The following translations are defaults built into every Text widget.
They can be overridden, or replaced by specifying a new value for the
Text widget's <I>translations</I> resource.</P>

<TABLE CELLSPACING=4 CELLPADDING=0 WIDTH="95%" >
<TR>
<TD>Ctrl&lt;Key&gt;A:<BR>
Ctrl&lt;Key&gt;B:<BR>
Ctrl&lt;Key&gt;D:<BR>
Ctrl&lt;Key&gt;E:<BR>
Ctrl&lt;Key&gt;F:<BR>
Ctrl&lt;Key&gt;G:<BR>
Ctrl&lt;Key&gt;H:<BR>
Ctrl&lt;Key&gt;J:<BR>
Ctrl&lt;Key&gt;K:<BR>
Ctrl&lt;Key&gt;L:<BR>
Ctrl&lt;Key&gt;M:<BR>
Ctrl&lt;Key&gt;N:<BR>
Ctrl&lt;Key&gt;O:<BR>
Ctrl&lt;Key&gt;P:<BR>
Ctrl&lt;Key&gt;R:<BR>
Ctrl&lt;Key&gt;S:<BR>
Ctrl&lt;Key&gt;T:<BR>
Ctrl&lt;Key&gt;U:<BR>
Ctrl&lt;Key&gt;V:<BR>
Ctrl&lt;Key&gt;W:<BR>
Ctrl&lt;Key&gt;Y:<BR>
Ctrl&lt;Key&gt;Z:<BR>
Meta&lt;Key&gt;B:<BR>
Meta&lt;Key&gt;F:<BR>
Meta&lt;Key&gt;I:<BR>
Meta&lt;Key&gt;K:<BR>
Meta&lt;Key&gt;Q:<BR>
Meta&lt;Key&gt;V:<BR>
Meta&lt;Key&gt;Y:<BR>
Meta&lt;Key&gt;Z:<BR>
:Meta&lt;Key&gt;d:<BR>
:Meta&lt;Key&gt;D:<BR>
:Meta&lt;Key&gt;h:<BR>
:Meta&lt;Key&gt;H:<BR>
:Meta&lt;Key&gt;\\&lt;:<BR>
:Meta&lt;Key&gt;\\&gt;:<BR>
:Meta&lt;Key&gt;]:<BR>
:Meta&lt;Key&gt;[:<BR>
~Shift Meta&lt;Key&gt;Delete:<BR>
\ Shift Meta&lt;Key&gt;Delete:<BR>
~Shift Meta&lt;Key&gt;Backspace:<BR>
\ Shift Meta&lt;Key&gt;Backspace:<BR>
&lt;Key&gt;Right:<BR>
&lt;Key&gt;Left:<BR>
&lt;Key&gt;Down:<BR>
&lt;Key&gt;Up:<BR>
&lt;Key&gt;Delete:<BR>
&lt;Key&gt;BackSpace:<BR>
&lt;Key&gt;Linefeed:<BR>
&lt;Key&gt;Return:<BR>
&lt;Key&gt;:<BR>
&lt;FocusIn&gt;:<BR>
&lt;FocusOut&gt;:<BR>
&lt;Btn1Down&gt;:<BR>
&lt;Btn1Motion&gt;:<BR>
&lt;Btn1Up&gt;:<BR>
&lt;Btn2Down&gt;:<BR>
&lt;Btn3Down&gt;:<BR>
&lt;Btn3Motion&gt;:<BR>
&lt;Btn3Up&gt;:</TD>

<TD>beginning-of-line()<BR>
backward-character()<BR>
delete-next-character()<BR>
end-of-line()<BR>
forward-character()<BR>
multiply(Reset)<BR>
delete-previous-character()<BR>
newline-and-indent()<BR>
kill-to-end-of-line()<BR>
redraw-display()<BR>
newline()<BR>
next-line()<BR>
newline-and-backup()<BR>
previous-line()<BR>
search(backward)<BR>
search(forward)<BR>
transpose-characters()<BR>
multiply(4)<BR>
next-page()<BR>
kill-selection()<BR>
insert-selection(CUT_BUFFER1)<BR>
scroll-one-line-up()<BR>
backward-word()<BR>
forward-word()<BR>
insert-file()<BR>
kill-to-end-of-paragraph()<BR>
form-paragraph()<BR>
previous-page()<BR>
insert-selection(PRIMARY, CUT_BUFFER0)<BR>
scroll-one-line-down()<BR>
delete-next-word()<BR>
kill-word()<BR>
delete-previous-word()<BR>
backward-kill-word()<BR>
beginning-of-file()<BR>
end-of-file()<BR>
forward-paragraph()<BR>
backward-paragraph()<BR>
delete-previous-word()<BR>
backward-kill-word()<BR>
delete-previous-word()<BR>
backward-kill-word()<BR>
forward-character()<BR>
backward-character()<BR>
next-line()<BR>
previous-line()<BR>
delete-previous-character()<BR>
delete-previous-character()<BR>
newline-and-indent()<BR>
newline()<BR>
insert-char()<BR>
focus-in()<BR>
focus-out()<BR>
select-start()<BR>
extend-adjust()<BR>
extend-end(PRIMARY, CUT_BUFFER0)<BR>
insert-selection(PRIMARY, CUT_BUFFER0)<BR>
extend-start()<BR>
extend-adjust()<BR>
extend-end(PRIMARY, CUT_BUFFER0)</TD>
</TR>
</TABLE>

<P></P>

<H3><I><FONT COLOR="#FF0000">Xaw</FONT><FONT COLOR="#008000">Plus_________________________________________________________</FONT></I></H3>

</BODY>
</HTML>
